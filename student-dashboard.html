<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard - Digital Learning</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <h1 class="nav-title">üìö Student Dashboard</h1>
            <div class="nav-actions">
                <div class="online-indicator" id="onlineStatus">
                    <span class="status-dot online"></span>
                    <span>Online</span>
                </div>
                <div class="notification-bell" onclick="toggleNotifications()">
                    üîî <span class="notification-count" id="notificationCount">0</span>
                </div>
                <!-- üîπ Fixed logout button -->
                <button onclick="logout()" class="logout-btn">Logout</button>
            </div>
        </div>
    </nav>

    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="user-profile" id="userProfile">
                <div class="profile-avatar">üë§</div>
                <div class="profile-info">
                    <h3 id="userName">Loading...</h3>
                    <p id="userGrade">Grade -</p>
                </div>
            </div>

            <nav class="sidebar-nav">
                <a href="#courses" class="nav-link active" data-section="courses">
                    üìñ My Courses
                </a>
                <a href="#videos" class="nav-link" data-section="videos">
                    üé• Videos
                </a>
                <a href="#quizzes" class="nav-link" data-section="quizzes">
                    üìù Quizzes
                </a>
                <a href="#progress" class="nav-link" data-section="progress">
                    üìä My Progress
                </a>
                <a href="#assignments" class="nav-link" data-section="assignments">
                    üìã Assignments
                </a>
            </nav>
        </aside>

        <main class="main-content">
            <!-- Courses Section -->
            <section id="courses" class="content-section active">
                <div class="section-header">
                    <h2>üìñ My Courses</h2>
                    <div class="search-box">
                        <input type="text" placeholder="Search courses..." id="courseSearch">
                        <button onclick="searchCourses()">üîç</button>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="totalCourses">0</h3>
                        <p>Total Courses</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="completedCourses">0</h3>
                        <p>Completed</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="inProgressCourses">0</h3>
                        <p>In Progress</p>
                    </div>
                </div>

                <div class="course-grid" id="courseGrid">
                    <!-- Courses will be loaded here -->
                </div>
            </section>

            <!-- Videos Section -->
            <section id="videos" class="content-section">
                <div class="section-header">
                    <h2>üé• Educational Videos</h2>
                    <select id="videoFilter">
                        <option value="all">All Videos</option>
                        <option value="watched">Watched</option>
                        <option value="unwatched">Not Watched</option>
                    </select>
                </div>

                <div class="video-grid" id="videoGrid">
                    <!-- Videos will be loaded here -->
                </div>
            </section>

            <!-- Quizzes Section -->
            <section id="quizzes" class="content-section">
                <div class="section-header">
                    <h2>üìù Available Quizzes</h2>
                    <div class="quiz-filters">
                        <select id="quizFilter">
                            <option value="all">All Quizzes</option>
                            <option value="pending">Pending</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                </div>

                <div class="quiz-grid" id="quizGrid">
                    <!-- Quizzes will be loaded here -->
                </div>
            </section>

            <!-- Progress Section -->
            <section id="progress" class="content-section">
                <div class="section-header">
                    <h2>üìä My Learning Progress</h2>
                </div>

                <div class="progress-overview">
                    <div class="progress-chart">
                        <canvas id="progressChart" width="400" height="200"></canvas>
                    </div>
                    
                    <div class="progress-details">
                        <div class="progress-item">
                            <h4>Overall Progress</h4>
                            <div class="progress-bar">
                                <div class="progress-fill" id="overallProgress" style="width: 0%"></div>
                            </div>
                            <span id="overallPercentage">0%</span>
                        </div>
                        
                        <div class="recent-activities">
                            <h4>Recent Activities</h4>
                            <div id="recentActivities">
                                <!-- Activities will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Assignments Section -->
            <section id="assignments" class="content-section">
                <div class="section-header">
                    <h2>üìã Assignments</h2>
                </div>

                <div class="assignment-tabs">
                    <button class="tab-btn active" data-tab="pending">Pending</button>
                    <button class="tab-btn" data-tab="submitted">Submitted</button>
                    <button class="tab-btn" data-tab="graded">Graded</button>
                </div>

                <div class="assignment-list" id="assignmentList">
                    <!-- Assignments will be loaded here -->
                </div>
            </section>
        </main>
    </div>

    <!-- Notification Panel -->
    <div class="notification-panel" id="notificationPanel">
        <div class="notification-header">
            <h3>Notifications</h3>
            <button onclick="toggleNotifications()">√ó</button>
        </div>
        <div class="notification-list" id="notificationList">
            <!-- Notifications will be loaded here -->
        </div>
    </div>

    <!-- Video Player Modal -->
    <div class="modal" id="videoModal">
        <div class="modal-content video-modal-content">
            <span class="close" onclick="closeVideoModal()">&times;</span>
            <video id="videoPlayer" controls width="100%" height="400">
                <source src="" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="video-info">
                <h3 id="videoTitle"></h3>
                <p id="videoDescription"></p>
                <div class="video-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="videoProgress"></div>
                    </div>
                    <span id="videoProgressText">0%</span>
                </div>
            </div>
        </div>
    </div>

    <script src="js/supabase.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/app.js"></script>
    <script src="js/real-time.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/video-handler.js"></script>
</body>
</html>
